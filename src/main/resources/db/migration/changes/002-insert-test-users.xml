<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

  <changeSet id="002-insert-test-users" author="onenull">
    <comment>Insert test users with roles</comment>

    <!-- USER -->
    <sql> INSERT INTO users (email, password_hashed, roles, created_at, updated_at) VALUES
      ('user@test.com', '$2a$12$SueZ4zDtnXGSEOjI4D6d8eh8cxl3aQU6ui8V5W9knpXFpVwy3BfOm', 'USER',
      NOW(), NOW()) ON CONFLICT (email) DO NOTHING; </sql>

    <!-- ADMIN -->
    <sql> INSERT INTO users (email, password_hashed, roles, created_at, updated_at) VALUES
      ('admin@test.com', '$2a$12$SueZ4zDtnXGSEOjI4D6d8eh8cxl3aQU6ui8V5W9knpXFpVwy3BfOm', 'ADMIN',
      NOW(), NOW()) ON CONFLICT (email) DO NOTHING; </sql>

    <rollback> DELETE FROM users WHERE email IN ('user@test.com', 'admin@test.com'); </rollback>
  </changeSet>

</databaseChangeLog>